apiVersion: v1
kind: ConfigMap
metadata:
  name: logstash-config
data:
    logstash.conf: |
        input {
        beats {
            port => 5044
        }
        }
        filter {
        if [type] == "syslog" {
            grok {
            match => { "message" => "%{SYSLOGLINE}" }
            }
            date {
            match => [ "timestamp", "MMM  d HH:mm:ss", "MMM dd HH:mm:ss" ]
            }
        }
        }
        output {
        elasticsearch {
            host => "elastic-search-service:80"
            protocol => "http"
            port => 80
        }
        }
    logstash.yml: |
        http.host: "0.0.0.0"
        path.config: /usr/share/logstash/pipeline
        xpack.monitoring.enabled: true